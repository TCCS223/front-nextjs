import React, { useContext, useState, useEffect } from "react";
import { UserContext } from "@/app/context/UserContext";
import api from "@/services/api";
import styles from "./page.module.css";

export default function DadosDoUsuario() {
    const { userId } = useContext(UserContext);
    const [meusDados, setMeusDados] = useState([]);

    // Função para buscar os dados do usuário
    const ListarDadosUsuario = async () => {
        try {
            const response = await api.get(`/usuarios/dadosUsuario/${userId}`);
            setMeusDados(response.data.dados);
            console.log(response.data.dados);
            
            // Preenche o estado com os dados da API
        } catch (error) {
            console.error("Erro ao buscar dados do usuário:", error);
        }
    };

    // Chama a função para listar os dados assim que o componente monta
    useEffect(() => {
        ListarDadosUsuario();
    }, []);

    // // Função para lidar com mudanças nos campos de input
    // const handleChange = (e) => {
    //     const { name, value } = e.target;
    //     setMeusDados({ ...meusDados, [name]: value });
    // };

    console.log("testando:",meusDados);
    
    return (
        <>
            <div id="clientes" className={styles.content_section}>
                <h2 className={styles.title_page}>Meus Dados</h2>

<p>{meusDados.usu_id}</p>

               
            </div>
        </>
    );
}

 {/* <form id="clienteForm" className={styles.form}>
                    <input type="hidden" id="clienteId" className={styles.input_cliente} value={meusDados?.usu_id} />

                    <div className={styles.grid}>
                        <div className={`${styles.grid_item} ${styles.grid_codigo}`}>
                            <label htmlFor="codigo_cliente" className={styles.label_cliente}>Código</label>
                            <input
                                type="number"
                                id="codigo_cliente"
                                name="codigo_cliente"
                                className={styles.input_cliente}
                                value={meusDados.usu_id || ''}
                                readOnly // Supondo que o ID não deva ser editável
                            />
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_nome}`}>
                            <label htmlFor="usu_nome" className={styles.label_cliente}>Nome</label>
                            <input
                                type="text"
                                id="usu_nome"
                                name="usu_nome"
                                className={styles.input_cliente}
                                placeholder="Nome Completo"
                                value={meusDados?.usu_nome || ''}
                                onChange={handleChange}
                            />
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_cpf}`}>
                            <label htmlFor="usu_cpf" className={styles.label_cliente}>CPF</label>
                            <input
                                type="text"
                                id="usu_cpf"
                                name="usu_cpf"
                                className={styles.input_cliente}
                                placeholder="000.000.000-00"
                                value={meusDados.usu_cpf || ''}
                                onChange={handleChange}
                            />
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_data}`}>
                            <label htmlFor="usu_data_nasc" className={styles.label_cliente}>Data de nascimento</label>
                            <input
                                type="date"
                                id="usu_data_nasc"
                                name="usu_data_nasc"
                                className={styles.input_cliente}
                                value={meusDados.usu_data_nasc} // Formato necessário para o input type="date"
                                onChange={handleChange}
                            />
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_sexo}`}>
                            <label htmlFor="usu_sexo" className={styles.label_cliente}>Sexo</label>
                            <select
                                id="usu_sexo"
                                name="usu_sexo"
                                className={`${styles.select_cliente} ${styles.input_sexo}`}
                                value={meusDados.usu_sexo || ''}
                                onChange={handleChange}
                            >
                                <option value="" disabled>Selecionar</option>
                                <option value="0">Masculino</option>
                                <option value="1">Feminino</option>
                                <option value="2">Outro</option>
                            </select>
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_telefone}`}>
                            <label htmlFor="usu_telefone" className={styles.label_cliente}>Telefone</label>
                            <input
                                type="tel"
                                id="usu_telefone"
                                name="usu_telefone"
                                className={styles.input_cliente}
                                placeholder="(xx) xxxxx - xxxxx"
                                value={meusDados.usu_telefone || ''}
                                onChange={handleChange}
                            />
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_email}`}>
                            <label htmlFor="usu_email" className={styles.label_cliente}>Email</label>
                            <input
                                type="email"
                                id="usu_email"
                                name="usu_email"
                                className={styles.input_cliente}
                                placeholder="exemplo@exemplo.com"
                                value={meusDados.usu_email || ''}
                                onChange={handleChange}
                            />
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_observacoes}`}>
                            <label htmlFor="usu_observ" className={styles.label_cliente}>Observações</label>
                            <input
                                type="text"
                                id="usu_observ"
                                name="usu_observ"
                                className={styles.input_cliente}
                                value={meusDados.usu_observ || ''}
                                onChange={handleChange}
                            />
                        </div>

                        <div className={`${styles.grid_item} ${styles.grid_situacao}`}>
                            <label htmlFor="usu_situacao" className={styles.label_cliente}>Situação</label>
                            <select
                                id="usu_situacao"
                                name="usu_situacao"
                                className={`${styles.select_cliente} ${styles.input_situacao}`}
                                value={meusDados.usu_situacao || '1'} // Assume '1' como ativo por padrão
                                onChange={handleChange}
                            >
                                <option value="1">Ativo</option>
                                <option value="0">Inativo</option>
                            </select>
                        </div>
                    </div>
                </form>

                <div className={styles.footer_form}>
                    <button type="reset" className={styles.button_cancel}>Cancelar</button>
                    <button type="submit" className={styles.button_submit}>Salvar</button>
                </div> */}